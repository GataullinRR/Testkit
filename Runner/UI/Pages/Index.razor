@inject PresentationService.API2.PresentationService.PresentationServiceClient PresentationServiceCleint;
@inject JsonSerializerSettings JsonSettings;
@inject IWebMessageHub Hub;
@inject IMessageService Messages;
@inject NavigationManager NavigationManager
@inject IAppInitializationAwaiter AppInitializer;
@page "/"

<TestsTable Tests="_tests"></TestsTable>

@code {
    public const string URI = "/";

    IEnumerable<TestInfo> _tests;

    protected override async Task OnInitializedAsync()
    {
        await AppInitializer.AwaitInitializedAsync();

        await loadTests();
    }

    async Task loadTests()
    {
        var response = await PresentationServiceCleint.ListTestsAsync(new PresentationService.API2.ListTestsRequest()
        {
            Range = new UIntRange() { From = 0, To = 10 }
        });
        var text = response.TestInfos.ToStringUtf8();
        _tests = JsonConvert.DeserializeObject<TestInfo[]>(text, JsonSettings);
    }
}