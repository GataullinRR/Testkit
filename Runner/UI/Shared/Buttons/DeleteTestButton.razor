@inject IPresentationService PresentationService;
@inject NavigationManager Navigation
@inject IMessageService MessageService
@inject IIdentityContext Identity
@inject Browser Browser;

@if (Identity.Identity.IsAuthentificated)
{
    <InlineButton class="text-danger" @onclick="() => goToAsync()">Delete</InlineButton>
}

@code {
    [Parameter]
    public IEnumerable<IFilterOrder> Filters { get; set; }

    async Task goToAsync()
    {
        if (Filters.Any(f => !(f is ByTestIdsFilter) || (f as ByTestIdsFilter)?.TestIds?.Length > 1) 
            && await Browser.ConfirmAsync($"Are you sure? You won't be able to restore deleted tests (yet)!"))
        {
            await PresentationService.DeleteTestAsync(new DeleteTestRequest(Filters.ToArray()));

            Navigation.NavigateTo(Pages.Index.URI);
        }
        else
        {

        }
    }
}